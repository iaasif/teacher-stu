<div class="p-6">
    <div class="flex justify-between mb-4">
        <h1 class="text-xl font-bold">Students</h1>
        <button (click)="add()" class="bg-green-600 text-white px-3 py-1 rounded">+ Add</button>
    </div>

    <div class="mb-4">
        <input #search (keyup.enter)="load()" placeholder="Search..." class="p-2 border rounded w-64">
        <button (click)="load()" class="ml-2 bg-blue-600 text-white px-3 py-1 rounded">Search</button>
        <button (click)="download()" class="ml-2 bg-gray-600 text-white px-3 py-1 rounded">Download CSV</button>
    </div>

    <input type="file" accept=".csv" (change)="upload($event)" class="mb-4">

    <table class="w-full border">
        <thead>
            <tr class="bg-gray-100">
                <th class="border p-2">Name</th>
                <th class="border p-2">Username</th>
                <th class="border p-2">Email</th>
                <th class="border p-2">Mobile</th>
                <th class="border p-2">Status</th>
                <th class="border p-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let s of students">
                <td class="border p-2">{{ s.name }}</td>
                <td class="border p-2">{{ s.username }}</td>
                <td class="border p-2">{{ s.email }}</td>
                <td class="border p-2">{{ s.mobile }}</td>
                <td class="border p-2">
                    <span [class]="'px-2 rounded ' + (s.is_active ? 'bg-green-200' : 'bg-red-200')">
                        {{ s.is_active ? 'Active' : 'Inactive' }}
                    </span>
                </td>
                <td class="border p-2">
                    <button (click)="edit(s)" class="text-blue-600 mr-2">Edit</button>
                    <button (click)="deactivate(s.id)" class="text-red-600">Deactivate</button>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="mt-4">
        <button (click)="prevPage()" [disabled]="page <= 1" class="px-3 py-1 bg-gray-200">Prev</button>
        <span class="mx-2">Page {{ page }}</span>
        <button (click)="nextPage()" class="px-3 py-1 bg-gray-200">Next</button>
        <select (change)="onLimitChange($event)" class="ml-4 border">
            <option [value]="5">5</option>
            <option [value]="10">10</option>
            <option [value]="20">20</option>
        </select>
    </div>
</div>